"use strict";(self.webpackChunkcoding_platform=self.webpackChunkcoding_platform||[]).push([[389],{8389:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(9379),r=s(5043),n=s(9586),i=s(5187),o=s(3611),l=s(791),d=s(1129),c=s(7304),x=s(6040),m=s(458);const g=()=>{const[e,t]=(0,r.useState)(0),s=(0,m.xI)(),a=(0,o.C3)();(0,r.useEffect)(()=>{if(s.currentUser){const e=s.currentUser.uid,r=(0,o.KR)(a,"Activitytime/".concat(e,"/")),n=(0,o.Zy)(r,e=>{e.exists()&&t(e.val())});return()=>n()}},[s.currentUser]);return{totalTime:e,formatTime:e=>{const t=Math.floor(e/1e3),s=Math.floor(t/3600),a=Math.floor(t%3600/60);return s>0?"".concat(s,"h ").concat(a,"m"):a>0?"".concat(a,"m"):"".concat(t,"s")}}};var h=s(579);const u=e=>{let{submissions:t}=e;if(!t||0===t.length)return(0,h.jsx)("div",{className:"text-center py-8 text-[#656d76] dark:text-[#7d8590] bg-white dark:bg-[#0d1117] rounded-lg border border-[#d0d7de] dark:border-[#30363d]",children:"No submission activity in the last 6 months."});const s=new Date,a=new Date;a.setMonth(s.getMonth()-6);const n=new Date(a);n.setDate(n.getDate()-n.getDay());const i=new Date(s);i.setDate(i.getDate()+(6-i.getDay()));const o=(0,r.useMemo)(()=>{const e=new Map;return t.forEach(t=>{const s=new Date(t.timestamp).toISOString().split("T")[0];e.set(s,(e.get(s)||0)+1)}),e},[t]),l=(0,r.useMemo)(()=>{const e=[],t=new Date(n);for(;t<=i;){const s=t.toISOString().split("T")[0];e.push({date:new Date(t),dateStr:s,count:o.get(s)||0,dayOfMonth:t.getDate()}),t.setDate(t.getDate()+1)}return e},[n,i,o]),d=(0,r.useMemo)(()=>{const e=[];for(let t=0;t<l.length;t+=7)e.push(l.slice(t,t+7));return e},[l]),c=(0,r.useMemo)(()=>{const e=[],t=new Set;return d.forEach((s,a)=>{for(const r of s){const s="".concat(r.date.getFullYear(),"-").concat(r.date.getMonth());if(!t.has(s)){t.add(s),e.push({weekIndex:a,label:r.date.toLocaleString("default",{month:"short"})});break}}}),e},[d]),x=e=>0===e?"bg-[#ebedf0] dark:bg-[#161b22]":e<=2?"bg-[#9be9a8] dark:bg-[#0e4429]":e<=4?"bg-[#40c463] dark:bg-[#006d32]":e<=6?"bg-[#30a14e] dark:bg-[#26a641]":"bg-[#216e39] dark:bg-[#39d353]",m=32;return(0,h.jsxs)("div",{className:"w-full overflow-x-auto bg-white dark:bg-[#0d1117] rounded-lg border border-[#d0d7de] dark:border-[#30363d] p-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-3",children:[(0,h.jsxs)("h3",{className:"text-lg font-semibold text-[#1f2328] dark:text-[#e6edf3]",children:[t.length," submissions in the last 6 months"]}),(0,h.jsxs)("div",{className:"flex items-center gap-2 text-sm text-[#656d76] dark:text-[#7d8590]",children:[(0,h.jsx)("span",{children:"Less"}),[0,2,4,6,8].map((e,t)=>(0,h.jsx)("div",{className:"w-3 h-3 rounded-sm ".concat(x(e)," border border-[rgba(27,31,36,0.06)] dark:border-transparent")},t)),(0,h.jsx)("span",{children:"More"})]})]}),(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsxs)("div",{className:"hidden sm:flex flex-col text-xs text-[#656d76] dark:text-[#7d8590]",style:{paddingTop:"24px",gap:"".concat(4,"px")},children:[(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Sun"}),(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Mon"}),(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Tue"}),(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Wed"}),(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Thu"}),(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Fri"}),(0,h.jsx)("div",{style:{height:"".concat(m,"px")},className:"flex items-center leading-none",children:"Sat"})]}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,h.jsx)("div",{className:"relative text-xs font-medium text-[#656d76] dark:text-[#7d8590] mb-2",style:{height:"20px"},children:c.map(e=>{let{weekIndex:t,label:s}=e;return(0,h.jsx)("span",{className:"absolute whitespace-nowrap",style:{left:"".concat(36*t,"px")},children:s},"".concat(t,"-").concat(s))})}),(0,h.jsx)("div",{className:"flex overflow-x-auto pb-2",style:{gap:"".concat(4,"px")},children:d.map((e,t)=>(0,h.jsx)("div",{className:"flex flex-col flex-shrink-0",style:{gap:"".concat(4,"px")},children:e.map((e,t)=>{const a=e.dateStr===s.toISOString().split("T")[0],r=e.count>0;return(0,h.jsxs)("div",{title:"".concat(e.date.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),": ").concat(e.count," submission").concat(1===e.count?"":"s"),className:"rounded-md ".concat(x(e.count)," ").concat(a?"ring-2 ring-[#0969da] dark:ring-[#58a6ff]":""," cursor-pointer transition-all duration-100 hover:ring-2 hover:ring-[#656d76] dark:hover:ring-[#7d8590] hover:scale-105 border border-[rgba(27,31,36,0.06)] dark:border-transparent relative flex flex-col items-center justify-center"),style:{width:"".concat(m,"px"),height:"".concat(m,"px")},children:[(0,h.jsx)("span",{className:"text-[10px] font-semibold leading-none ".concat(r?"text-white":"text-[#656d76] dark:text-[#7d8590]"),children:e.dayOfMonth}),r&&(0,h.jsxs)("span",{className:"text-[8px] font-bold text-white mt-0.5 leading-none",children:["(",e.count,")"]})]},t)})},t))})]})]}),(0,h.jsx)("p",{className:"mt-4 text-sm text-[#656d76] dark:text-[#7d8590]",children:"Hover over a day to see full details"})]})};c.t1.register(c.PP,c.kc,c.FN,c.No,c.E8,c.hE,c.m_,c.s$);const b=()=>(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),p=()=>(0,h.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),f=e=>{if(!e)return new Date(NaN);const t=e.replace(/T(\d{2})_(\d{2})_(\d{2})_(\d{3})Z/,"T$1:$2:$3.$4Z"),s=new Date(t);return isNaN(s.getTime())?new Date(NaN):s},y=e=>{switch(e){case"Accepted":return"text-green-600 bg-green-100 dark:text-green-400 dark:bg-green-900/30";case"Wrong Answer":return"text-red-600 bg-red-100 dark:text-red-400 dark:bg-red-900/30";case"Runtime Error":return"text-yellow-600 bg-yellow-100 dark:text-yellow-400 dark:bg-yellow-900/30";default:return"text-gray-600 bg-gray-100 dark:text-gray-400 dark:bg-gray-900/30"}},j=e=>{const t=f(e);return isNaN(t.getTime())?(console.warn("Invalid date for timestamp:",e),"N/A"):t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})},v=e=>{if(!e)return"Unknown";return new Date(e).toLocaleDateString("en-US",{month:"long",year:"numeric"})};const k=function(){var e,t;const{theme:s}=(0,n.D)(),{user:c,logout:m,loading:k}=(0,i.A)(),[N,w]=(0,r.useState)("overview"),[S,D]=(0,r.useState)("dark"===s),[A,M]=(0,r.useState)(null),[L,T]=(0,r.useState)("hourly"),[U,C]=(0,r.useState)(()=>(new Date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})),[E,I]=(0,r.useState)({labels:[],data:[]}),{totalTime:O,formatTime:P}=g(),R=(e,t)=>{const s=new Map,a=new Date;if("hourly"===t){for(let e=0;e<24;e++)s.set(e.toString().padStart(2,"0"),0);const[t,a,r]=U.match(/([A-Za-z]+) (\d+), (\d+)/).slice(1);for(const n in e)for(const i in e[n])for(const o in e[n][i])for(const l in e[n][i][o]){if("correct"===e[n][i][o][l].status){const e=new Date(f(l));if(e.getFullYear()===Number(r)&&e.toLocaleString("en-US",{month:"short"})===t&&e.getDate()===Number(a)){const t=e.getHours().toString().padStart(2,"0");s.has(t)&&s.set(t,s.get(t)+1)}}}}else if("weekly"===t){for(let e=6;e>=0;e--){const t=new Date;t.setDate(a.getDate()-e),s.set(t.toLocaleDateString(),0)}for(const t in e)for(const a in e[t])for(const r in e[t][a])for(const n in e[t][a][r]){if("correct"===e[t][a][r][n].status){const e=new Date(f(n)).toLocaleDateString();s.has(e)&&s.set(e,s.get(e)+1)}}}else if("monthly"===t){const t=(()=>{const e=new Date,t=[];for(let s=11;s>=0;s--){const a=new Date;a.setMonth(e.getMonth()-s),t.push(a.toLocaleDateString("en-US",{month:"short",year:"numeric"}))}return t})();t.forEach(e=>s.set(e,0));for(const a in e)for(const t in e[a])for(const r in e[a][t])for(const n in e[a][t][r]){if("correct"===e[a][t][r][n].status){const e=new Date(f(n)).toLocaleDateString("en-US",{month:"short",year:"numeric"});s.has(e)&&s.set(e,s.get(e)+1)}}}return{labels:Array.from(s.keys()),data:Array.from(s.values())}};return(0,r.useEffect)(()=>{c&&(M({username:c.name||"Anonymous",email:c.email||"No email provided",joinDate:v(Date.now()),photoURL:c.photoURL||"https://via.placeholder.com/150",allSubmissions:[],recentSubmissions:[],stats:{totalSubmissions:0,acceptedSubmissions:0,streak:0,rank:"Beginner"}}),(async()=>{if(null===c||void 0===c||!c.uid)return;const e=(0,o.KR)(l.OO),t="userprogress/".concat(c.uid),s="Submissions/".concat(c.uid);try{const[r,n]=await Promise.all([(0,o.Jt)((0,o.jf)(e,t)),(0,o.Jt)((0,o.jf)(e,s))]);let i=0,l=0,d=[];if(r.exists()){const e=r.val();for(const t in e)for(const s in e[t])for(const a in e[t][s]){const r=e[t][s][a];!0===("object"===typeof r?r.accepted:r)&&i++}}if(n.exists()){const e=n.val();l=0;for(const s in e)for(const t in e[s])for(const a in e[s][t])for(const r in e[s][t][a]){const n=e[s][t][a][r];l++,d.push({problem:a,course:s,subcourse:t,language:n.language||"N/A",status:"correct"===n.status?"Accepted":"Wrong Answer",runtime:"-",date:j(r),timestamp:f(r).getTime(),code:n.code})}d.sort((e,t)=>t.timestamp-e.timestamp);const t=R(e,L);I(t)}M(e=>(0,a.A)((0,a.A)({},e),{},{stats:(0,a.A)((0,a.A)({},e.stats),{},{acceptedSubmissions:i,totalSubmissions:l}),allSubmissions:d,recentSubmissions:d.slice(0,10)}))}catch(r){console.error("Error fetching user data:",r)}})())},[c,L,U]),k?(0,h.jsx)(x.A,{}):c?A?(console.log("Profile Data:",A),(0,h.jsx)("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:(0,h.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,h.jsx)("div",{className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 p-8 mb-8",children:(0,h.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-8",children:[(0,h.jsx)("div",{className:"relative",children:(0,h.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 p-1",children:(0,h.jsx)("img",{src:A.photoURL,alt:"Profile",className:"w-full h-full rounded-full border-4 border-white dark:border-gray-800"})})}),(0,h.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,h.jsx)("div",{className:"flex items-center gap-4",children:(0,h.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:A.username})}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[(0,h.jsx)(b,{}),(0,h.jsxs)("span",{children:["Joined ",A.joinDate]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3 text-gray-600 dark:text-gray-400",children:[(0,h.jsx)(p,{}),(0,h.jsx)("span",{children:A.email})]})]}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:A.bio}),(0,h.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[(0,h.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:A.stats.totalSubmissions}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Total Submissions"})]}),(0,h.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:A.stats.acceptedSubmissions}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Accepted"})]}),(0,h.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:A.stats.rank}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Rank"})]}),(0,h.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-xl",children:[(0,h.jsx)("div",{className:"text-2xl font-bold",children:P(O)}),(0,h.jsx)("div",{className:"text-sm opacity-90",children:"Time Spent"})]})]})]})]})}),(0,h.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm dark:bg-gray-800/80 rounded-2xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 mb-8",children:[(0,h.jsxs)("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[(0,h.jsx)("button",{className:"px-6 py-4 text-sm font-medium transition-all duration-200 ".concat("overview"===N?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"),onClick:()=>w("overview"),children:"Overview"}),(0,h.jsx)("button",{className:"px-6 py-4 text-sm font-medium transition-all duration-200 ".concat("submissions"===N?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50 dark:bg-blue-900/20":"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"),onClick:()=>w("submissions"),children:"Submissions"})]}),(0,h.jsxs)("div",{className:"p-8",children:["overview"===N&&(0,h.jsx)("div",{className:"space-y-8",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Activity Calendar (Last 6 Months)"}),(0,h.jsx)(u,{submissions:A.allSubmissions})]})}),"submissions"===N&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["All Submissions (",(null===(e=A.allSubmissions)||void 0===e?void 0:e.length)||0,")"]}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsxs)("select",{className:"bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm backdrop-blur-sm",onChange:e=>{const t=A.allSubmissions.filter(t=>"All Languages"===e.target.value||t.language===e.target.value);M(e=>(0,a.A)((0,a.A)({},e),{},{recentSubmissions:t.slice(0,10)}))},children:[(0,h.jsx)("option",{children:"All Languages"}),(0,h.jsx)("option",{children:"python"}),(0,h.jsx)("option",{children:"javascript"}),(0,h.jsx)("option",{children:"java"}),(0,h.jsx)("option",{children:"cpp"})]}),(0,h.jsxs)("select",{className:"bg-white/70 dark:bg-gray-700/70 border border-gray-300 dark:border-gray-600 rounded-lg px-4 py-2 text-sm backdrop-blur-sm",onChange:e=>{const t=A.allSubmissions.filter(t=>"All Status"===e.target.value||t.status===e.target.value);M(e=>(0,a.A)((0,a.A)({},e),{},{recentSubmissions:t.slice(0,10)}))},children:[(0,h.jsx)("option",{children:"All Status"}),(0,h.jsx)("option",{children:"Accepted"}),(0,h.jsx)("option",{children:"Wrong Answer"})]})]})]}),(0,h.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,h.jsx)("thead",{className:"bg-gray-50/50 dark:bg-gray-700/50",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Problem"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Course"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Language"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,h.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"})]})}),(0,h.jsx)("tbody",{className:"bg-white/30 dark:bg-gray-800/30 divide-y divide-gray-200 dark:divide-gray-700",children:A.recentSubmissions.map((e,t)=>(0,h.jsxs)("tr",{className:"hover:bg-gray-50/50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.problem})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.course," / ",e.subcourse]})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.language})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(y(e.status)),children:e.status})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.date||"N/A"})})]},t))})]})}),(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm disabled:opacity-50",disabled:A.recentSubmissions.length<=10,onClick:()=>{const e=A.allSubmissions.findIndex(e=>e.timestamp===A.recentSubmissions[0].timestamp),t=Math.max(0,e-10);M(e=>(0,a.A)((0,a.A)({},e),{},{recentSubmissions:e.allSubmissions.slice(t,t+10)}))},children:"Previous"}),(0,h.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["(",(null===(t=A.allSubmissions)||void 0===t?void 0:t.length)||0,")"]}),(0,h.jsx)("button",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm disabled:opacity-50",disabled:0===A.recentSubmissions.length||A.allSubmissions.length<=A.recentSubmissions.length||A.recentSubmissions[A.recentSubmissions.length-1].timestamp===A.allSubmissions[A.allSubmissions.length-1].timestamp,onClick:()=>{const e=A.allSubmissions.findIndex(e=>e.timestamp===A.recentSubmissions[A.recentSubmissions.length-1].timestamp)+1;M(t=>(0,a.A)((0,a.A)({},t),{},{recentSubmissions:t.allSubmissions.slice(e,e+10)}))},children:"Next"})]})]})]})]})]})})})):(0,h.jsx)(x.A,{}):(0,h.jsx)(d.A,{})}}}]);
//# sourceMappingURL=389.3b66185d.chunk.js.map